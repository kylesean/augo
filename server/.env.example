# ==============================================================================
# Augo Assistant - Environment Configuration Example
# ==============================================================================
# This file defines all available configuration variables for the application.
# Copy this file to .env or .env.{environment} and update the values.
#
# Usage:
#   Development: cp .env.example .env
#   Production:  cp .env.example .env.production
# ==============================================================================

# ------------------------------------------------------------------------------
# 1. Environment & Global Project Settings
# ------------------------------------------------------------------------------
APP_ENV=development             # Options: development, staging, production, test
PROJECT_NAME="Augo Assistant"
VERSION=1.0.0
DEBUG=true                      # Set to false in production
API_V1_STR="/api/v1"
ALLOWED_ORIGINS="*"             # CORS allowed origins (comma-separated for multiple)

# ------------------------------------------------------------------------------
# 2. Database Configuration (PostgreSQL + pgvector)
# ------------------------------------------------------------------------------
# Note: For Docker deployment, POSTGRES_HOST should be 'db'
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=augo
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_POOL_SIZE=20
POSTGRES_MAX_OVERFLOW=10

# ------------------------------------------------------------------------------
# 3. Redis Configuration (Caching & Rate Limiting)
# ------------------------------------------------------------------------------
# Note: For Docker deployment, REDIS_HOST should be 'redis'
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_POOL_SIZE=10

# ------------------------------------------------------------------------------
# 4. Authentication & Security
# ------------------------------------------------------------------------------
# Generate a secure key using: openssl rand -hex 32
JWT_SECRET_KEY=yoursecretkeyhere
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_DAYS=30

# Fernet key for sensitive data encryption
# Generate using: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=

# ------------------------------------------------------------------------------
# 5. LLM & AI Services (OpenAI / DeepSeek / Langfuse)
# ------------------------------------------------------------------------------
# LLM Provider Configuration
OPENAI_API_KEY=sk-xxxxxx
# Optional: Set local/proxy base URL (e.g., https://api.deepseek.com/v1)
OPENAI_BASE_URL=

# Default Model Settings
DEFAULT_LLM_MODEL=gpt-4o-mini   # Recommended: gpt-4o-mini or deepseek-chat
DEFAULT_LLM_TEMPERATURE=0.2

# Observability (Langfuse)
LANGFUSE_PUBLIC_KEY=pk-lf-xxxxxx
LANGFUSE_SECRET_KEY=sk-lf-xxxxxx
LANGFUSE_HOST=https://cloud.langfuse.com

# Long Term Memory (Mem0)
# Mem0 provides intelligent memory extraction and retrieval for AI conversations.
# It automatically extracts key facts, preferences, and decisions from conversations.
# Uses pgvector for vector storage (shared with main database).

# LLM for memory extraction (uses OpenAI API)
LONG_TERM_MEMORY_MODEL=gpt-4o-mini

# Embedder Provider: "openai", "ollama", or "huggingface"
LONG_TERM_MEMORY_EMBEDDER_PROVIDER=openai

# Embedding model name (varies by provider)
# - OpenAI: text-embedding-3-small, text-embedding-3-large, text-embedding-ada-002
# - Ollama: nomic-embed-text, mxbai-embed-large, bge-m3
# - HuggingFace: BAAI/bge-small-en-v1.5, sentence-transformers/all-MiniLM-L6-v2
LONG_TERM_MEMORY_EMBEDDER_MODEL=text-embedding-3-small

# Embedding dimensions (must match the model output)
# - text-embedding-3-small: 1536 (or truncated to 1024/512)
# - nomic-embed-text: 768
# - bge-m3: 1024
LONG_TERM_MEMORY_EMBEDDER_DIMS=1024

# pgvector collection name
LONG_TERM_MEMORY_COLLECTION_NAME=longterm_memory

# OpenAI/HuggingFace API configuration
LONG_TERM_MEMORY_EMBEDDER_API_KEY=           # API key (uses OPENAI_API_KEY if not set)
LONG_TERM_MEMORY_EMBEDDER_BASE_URL=          # Custom base URL for OpenAI-compatible APIs

# Ollama configuration (when EMBEDDER_PROVIDER=ollama)
LONG_TERM_MEMORY_OLLAMA_BASE_URL=http://localhost:11434

# ================================
# Example: Using SiliconFlow API
# ================================
# LONG_TERM_MEMORY_EMBEDDER_PROVIDER=openai
# LONG_TERM_MEMORY_EMBEDDER_MODEL=BAAI/bge-m3
# LONG_TERM_MEMORY_EMBEDDER_DIMS=1024
# LONG_TERM_MEMORY_EMBEDDER_API_KEY=sk-xxx
# LONG_TERM_MEMORY_EMBEDDER_BASE_URL=https://api.siliconflow.cn/v1

# ================================
# Example: Using Ollama (local)
# ================================
# LONG_TERM_MEMORY_EMBEDDER_PROVIDER=ollama
# LONG_TERM_MEMORY_EMBEDDER_MODEL=nomic-embed-text
# LONG_TERM_MEMORY_EMBEDDER_DIMS=768
# LONG_TERM_MEMORY_OLLAMA_BASE_URL=http://localhost:11434


# ------------------------------------------------------------------------------
# 6. Financial Services (Exchange Rates)
# ------------------------------------------------------------------------------
# Get your API key from: https://www.exchangerate-api.com/
EXCHANGE_RATE_API_URL=https://v6.exchangerate-api.com/v6/YOUR_API_KEY/latest/USD
EXCHANGE_RATE_CACHE_KEY="exchange_rates:usd"
EXCHANGE_RATE_CACHE_TTL=86400  # 24 hours
EXCHANGE_RATE_CRON_HOUR=0
EXCHANGE_RATE_CRON_MINUTE=0

# ------------------------------------------------------------------------------
# 7. Messaging & Notifications (SMTP / SMS)
# ------------------------------------------------------------------------------
# Providers: mock, smtp (email) / mock, aliyun, twilio (sms)
EMAIL_PROVIDER=mock
SMS_PROVIDER=mock
CODE_EXPIRY_SECONDS=300

# SMTP Configuration (only if EMAIL_PROVIDER=smtp)
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME="Augo Assistant"

# ------------------------------------------------------------------------------
# 8. Logging & Storage
# ------------------------------------------------------------------------------
LOG_LEVEL=INFO                  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=console              # console, json
LOG_DIR=logs

# File Uploads
UPLOAD_DIR=storage/uploads
MAX_UPLOAD_SIZE=10485760        # 10MB
ALLOWED_MIME_TYPES="image/jpeg,image/png,image/webp,application/pdf"

# Storage Provider Configuration
# Options: local_uploads (default), s3_compatible
STORAGE_PROVIDER=local_uploads

# S3 Compatible Storage (Supabase, MinIO, AWS S3)
# Required when STORAGE_PROVIDER=s3_compatible
S3_ENDPOINT=https://your-project.supabase.co/storage/v1/s3
S3_ACCESS_KEY=your-access-key
S3_SECRET_KEY=your-secret-key
S3_BUCKET=augo-data
S3_REGION=us-east-1

# ------------------------------------------------------------------------------
# 9. Rate Limiting
# ------------------------------------------------------------------------------
RATE_LIMIT_DEFAULT="200 per day,50 per hour"
RATE_LIMIT_LOGIN="20 per minute"
RATE_LIMIT_CHAT="30 per minute"
RATE_LIMIT_CHAT_STREAM="20 per minute"
RATE_LIMIT_MESSAGES="50 per minute"

# ------------------------------------------------------------------------------
# 10. Monitoring & Evaluation
# ------------------------------------------------------------------------------
ENABLE_METRICS=false
METRICS_PORT=9090

# AI Evaluation
EVALUATION_LLM=gpt-4o
EVALUATION_BASE_URL=https://api.openai.com/v1
EVALUATION_API_KEY=